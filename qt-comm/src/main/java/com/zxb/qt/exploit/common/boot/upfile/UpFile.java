package com.zxb.qt.exploit.common.boot.upfile;


import com.sun.org.apache.regexp.internal.RE;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.context.annotation.PropertySource;
import org.springframework.web.multipart.MultipartFile;

import javax.servlet.http.HttpServletRequest;
import java.io.File;
import java.io.IOException;

/**
 * 文件上传
 */
public class UpFile {


    private String filepath = "http://139.224.129.134/file/" ;

    public  Boolean UploadImg( MultipartFile multipartFile , String fileName ) {
        String type = gettype( multipartFile.getContentType() );

        System.out.println( filepath );

        String upFile = filepath+"/"+fileName+"."+type;
        System.out.println( upFile );
        File file = new File( "" , upFile );
        System.out.println( file.getPath() );
        //判断路径是否存在
        if( !file.getParentFile().exists() ){
            file.getParentFile().mkdirs();
        }
        try {
            //上传文件                                                                           // 文件地址
            multipartFile.transferTo( file );
        } catch (IOException e) {
            e.printStackTrace();
            return false;
        }
        return true;
    }


    //multipartFile.getContentType(); 结果是类似这样 image\jpeg
    private  String gettype( String types ){
        System.out.println( types );
        return types.split( "/" )[1] ;
    }








}
